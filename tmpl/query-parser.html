{{~#*inline "term"~}}
{{~#if preview~}}
<span class="query-parser-term-preview">
{{~else~}}
<span class="query-parser-term">
{{~/if~}}
{{~#each this~}}
{{> part }}
{{~/each~}}
</span>
{{~/inline~}}

{{~#*inline "part"~}}
{{~#if raw~}}
{{~#each text~}}
<span class="query-parser-char">{{this}}</span>
{{~/each~}}
{{~else~}}
<ruby>{{~#each text~}}
<span class="query-parser-char">{{this}}</span>
{{~/each~}}<rt>{{reading}}</rt></ruby>
{{~/if~}}
{{~/inline~}}

{{~#each terms~}}
{{> term preview=../preview }}
{{~/each~}}
